"use strict";(globalThis.webpackChunksurerank=globalThis.webpackChunksurerank||[]).push([[322,480],{1455:e=>{e.exports=window.wp.apiFetch},27723:e=>{e.exports=window.wp.i18n},29177:(e,t,a)=>{var n=a(51609),r=a(5338),s=a(27723),o=a(86087),l=a(1455),c=a.n(l),i=a(59572),d=a(45350),u=a(88029),p=a(30732),m=a(29767),E=a(87835),w=a(48697),h=a(55300),f=a(66221),k=a(22343),y=a(71149),g=a(96404),_=a(9607),x=(a(36199),a(47143)),b=a(1671);const v=({open:e,setOpen:t,seoScore:a,pageTitle:r,postId:l})=>{const{setPageSeoCheck:c}=(0,x.useDispatch)(b.E);(0,o.useEffect)((()=>{if(e&&l){c("postId",parseInt(l,10));const e="taxonomy"===window?.surerank_seo_bar?.type;c("checkType",e?"taxonomy":"post")}}),[e,l]);const m=(0,_.mT)(a);return(0,n.createElement)(i.A,{exitOnEsc:!0,position:"right",scrollLock:!0,setOpen:t,open:e,className:"z-999999"},(0,n.createElement)(i.A.Panel,null,(0,n.createElement)(i.A.Header,{className:"px-5 pt-5 pb-0"},(0,n.createElement)(d.mc,{align:"center",justify:"between"},(0,n.createElement)(y.uw,{className:"w-32 h-5"}),(0,n.createElement)(u.A,{variant:"ghost",size:"sm",icon:(0,n.createElement)(w.A,null),onClick:e=>{e.preventDefault(),e.stopPropagation(),t(!1)},className:"text-text-secondary hover:text-text-primary","aria-label":(0,s.__)("Close drawer","surerank")})),(0,n.createElement)(d.mc,{align:"center",justify:"between"},(0,n.createElement)(p.E,{as:"span",color:"primary",className:"py-2",size:14,weight:500},r+" - "+(0,s.__)("Page SEO Checks","surerank")))),(0,n.createElement)(i.A.Body,{className:"overflow-x-hidden space-y-3 px-3"},(0,n.createElement)(f.N,null,a?(0,n.createElement)(g.A,{pageSeoChecks:m}):(0,n.createElement)(k.P.div,{className:"space-y-2 p-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},(0,n.createElement)("p",{className:"m-0 text-text-secondary"},(0,s.__)("No SEO data available.","surerank")))))),(0,n.createElement)(i.A.Backdrop,null))},N=({id:e,spanElement:t,forceRefresh:a=!1})=>{const[r,l]=(0,o.useState)(!0),[i,d]=(0,o.useState)(null),[u,p]=(0,o.useState)(!1),[w,f]=(0,o.useState)(""),[k,y]=(0,o.useState)(null);(0,o.useEffect)((()=>{a&&(l(!0),d(null),y(null))}),[a]),(0,o.useEffect)((()=>{if(!e)return l(!1),void y((0,s.__)("No ID provided","surerank"));(async()=>{try{l(!0),y(null);const r=t?.getAttribute("data-title")||(0,s.__)("Untitled","surerank");f(r);const o="taxonomy"===window?.surerank_seo_bar?.type?`/surerank/v1/taxonomy-seo-checks?term_id=${e}`:`/surerank/v1/page-seo-checks?post_id=${e}`,i=a?`&_t=${Date.now()}`:"",u=new AbortController,p=setTimeout((()=>u.abort()),1e4);try{const e=await c()({path:o+i,method:"GET",signal:u.signal});clearTimeout(p),e&&e.checks?d(e.checks):(d(null),y((0,s.__)("No SEO data found","surerank")))}catch(n){throw clearTimeout(p),n}}catch(r){d(null),f((0,s.__)("Untitled","surerank")),y("AbortError"===r.name?(0,s.__)("Request timeout","surerank"):r.message||(0,s.__)("Failed to fetch SEO data","surerank"))}finally{l(!1)}})()}),[e,t,a]);const g=()=>{p(!0)};if(r)return(0,n.createElement)(m.A,{variant:"rectangular",className:"w-full rounded-full h-6 max-w-32"});const _=i?Object.values(i):[];let x={icon:(0,n.createElement)(h.A,null),variant:"green",label:(0,s.__)("Optimized","surerank"),className:"w-fit"};return k||!i?x={...x,variant:"red",label:(0,s.__)(k?"Error":"No Data","surerank")}:_.some((e=>"error"===e.status))?x={...x,variant:"red",label:(0,s.__)("Issues Detected","surerank")}:_.some((e=>"warning"===e.status))&&(x={...x,variant:"yellow",label:(0,s.__)("Needs Improvement","surerank")}),(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{onClick:g,role:"button",tabIndex:0,className:"inline-block cursor-pointer w-full",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||g()}},(0,n.createElement)(E.A,{...x})),(0,n.createElement)(v,{open:u,setOpen:p,seoScore:i,pageTitle:w,postId:e}))},T=new Map,A=(e,t=!1)=>{const a=e.getAttribute("data-id");if(!a)return;if(!t&&"true"===e.dataset.rendered)return;const s=T.get(e);if(s){try{s.unmount()}catch(o){}T.delete(e)}try{const s=(0,r.H)(e);T.set(e,s),s.render((0,n.createElement)(N,{id:a,spanElement:e,forceRefresh:t})),e.dataset.rendered="true"}catch(o){}};document.addEventListener("DOMContentLoaded",(()=>{(window.location.pathname.includes("edit.php")||window.location.pathname.includes("edit-tags.php"))&&document.querySelectorAll("span.surerank-page-score[data-id]").forEach((e=>{A(e,!1)}));const e=document.querySelector("#the-list");e&&new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.length&&e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("span.surerank-page-score[data-id]").forEach((e=>{e.dataset.rendered||A(e,!0)}))}))}))})).observe(e,{childList:!0,subtree:!0})})),document.addEventListener("DOMContentLoaded",(()=>{if("undefined"!==typeof inlineEditTax&&"function"===typeof inlineEditTax.save){const e=inlineEditTax.save;inlineEditTax.save=function(t){let a=t;if(t&&"object"===typeof t&&t.nodeType)try{const e=t.closest('tr[id^="tag-"], tr[id^="edit-"]'),n=e?e.id:null;if(!n)return;{const e=n.split("-");a=e[e.length-1]}}catch(r){return}else"string"===typeof t&&t.startsWith("tag-")&&(a=t.replace("tag-",""));const n=e.call(this,a);return(()=>{let e;return function(...t){clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),(()=>{const e=document.querySelector(`span.surerank-page-score[data-id="${a}"]`);e&&A(e,!0)})(...t)}),3e3)}})()(),n}}}))},47143:e=>{e.exports=window.wp.data},51609:e=>{e.exports=window.React},66087:e=>{e.exports=window.lodash},75795:e=>{e.exports=window.ReactDOM},86087:e=>{e.exports=window.wp.element},93832:e=>{e.exports=window.wp.url}},e=>{e.O(0,[795,878,115,85,359,620,691,426,254,440,584,418,555,123,314,427,789,973,43,732,599,811,160,683,40,634,397,76],(()=>e(e.s=29177))),e.O()}]);